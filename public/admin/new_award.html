<!DOCTYPE html>
<html>
<head>
    <title>Alpha</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport' />
    <script src="/assets/stylesheets/laydate/laydate.js"></script>
    <!--[if lt IE 9]>
    <script src='/assets/javascripts/html5shiv.js' type='text/javascript'></script>
    <![endif]-->
    <link href='/assets/stylesheets/bootstrap/bootstrap.css' media='all' rel='stylesheet' type='text/css' />
    <link href='/assets/stylesheets/bootstrap/bootstrap-responsive.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / jquery ui -->
    <link href='/assets/stylesheets/jquery_ui/jquery-ui-1.10.0.custom.css' media='all' rel='stylesheet' type='text/css' />
    <link href='/assets/stylesheets/jquery_ui/jquery.ui.1.10.0.ie.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / switch buttons -->
    <link href='/assets/stylesheets/plugins/bootstrap_switch/bootstrap-switch.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / xeditable -->
    <link href='/assets/stylesheets/plugins/xeditable/bootstrap-editable.css' media='all' rel='stylesheet' type='text/css' />
    <link href='/assets/stylesheets/plugins/common/bootstrap-wysihtml5.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / wysihtml5 (wysywig) -->
    <link href='/assets/stylesheets/plugins/common/bootstrap-wysihtml5.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / jquery file upload -->
    <link href='/assets/stylesheets/plugins/jquery_fileupload/jquery.fileupload-ui.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / full calendar -->
    <link href='/assets/stylesheets/plugins/fullcalendar/fullcalendar.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / select2 -->
    <link href='/assets/stylesheets/plugins/select2/select2.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / mention -->
    <link href='/assets/stylesheets/plugins/mention/mention.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / tabdrop (responsive tabs) -->
    <link href='/assets/stylesheets/plugins/tabdrop/tabdrop.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / jgrowl notifications -->
    <link href='/assets/stylesheets/plugins/jgrowl/jquery.jgrowl.min.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / datatables -->
    <link href='/assets/stylesheets/plugins/datatables/bootstrap-datatable.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / dynatrees (file trees) -->
    <link href='/assets/stylesheets/plugins/dynatree/ui.dynatree.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / color picker -->
    <link href='/assets/stylesheets/plugins/bootstrap_colorpicker/bootstrap-colorpicker.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / datetime picker -->
    <link href='/assets/stylesheets/plugins/bootstrap_datetimepicker/bootstrap-datetimepicker.min.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / daterange picker) -->
    <link href='/assets/stylesheets/plugins/bootstrap_daterangepicker/bootstrap-daterangepicker.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / flags (country flags) -->
    <link href='/assets/stylesheets/plugins/flags/flags.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / slider nav (address book) -->
    <link href='/assets/stylesheets/plugins/slider_nav/slidernav.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / fuelux (wizard) -->
    <link href='/assets/stylesheets/plugins/fuelux/wizard.css' media='all' rel='stylesheet' type='text/css' />
    <!-- / flatty theme -->
    <link href='/assets/stylesheets/light-theme.css' id='color-settings-body-color' media='all' rel='stylesheet' type='text/css' />
    <!-- / demo -->
    <link href='/assets/stylesheets/demo.css' media='all' rel='stylesheet' type='text/css' />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- / jquery -->
    <script src='/assets/javascripts/jquery/jquery.min.js' type='text/javascript'></script>

</head>

<body class='contrast-red '>
<header>
    <div class='navbar'>
        <div class='navbar-inner'>
            <div class='container-fluid'>
                <a class='brand' href='index.html'>
                    <i class='icon-heart-empty'></i>
                    <span class='hidden-phone'>Alpha</span>
                </a>
                <a class='toggle-nav btn pull-left' href='#'>
                    <i class='icon-reorder'></i>
                </a>

            </div>
        </div>
    </div>
</header>
<div id='wrapper'>
<div id='main-nav-bg'></div>
<nav class='' id='main-nav'>
    <div class='navigation'>

        <ul class='nav nav-stacked'>
            <li class=''>
                <a href='/web/admin/index.html'>
                    <i class='icon-dashboard'></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class=''>
                <a href='/web/admin/new_event.html'>
                    <i class='icon-edit'></i>
                    <span>新的转发活动</span>

                </a>
            </li>
            <li class='active'>
                <a href='/web/admin/new_award.html'>
                    <i class='icon-edit'></i>
                    <span>新的抽奖活动</span>

                </a>
            </li>
            <li class=''>
                <a href='/web/myadmin/event/index'>
                    <i class='icon-star'></i>
                    <span>转发流水</span>
                </a>
            </li>
            <li class=''>
                <a href='/web/myadmin/lottery/index'>
                    <i class='icon-table'></i>
                    <span>抽奖流水</span>
                </a>
            </li>
            <li class=''>
                <a href='/web/myadmin/award/index'>
                    <i class='icon-edit'></i>
                    <span>奖品列表</span>

                </a>
            </li>
            <li class=''>
                <a href='/web/myadmin/setreply'>
                    <i class='icon-table'></i>
                    <span>设置自动回复</span>
                </a>
            </li>


        </ul>
    </div>
</nav>

<section id='content'>
<div class='container-fluid'>
<div class='row-fluid' id='content-wrapper'>
<div class='span12'>
    <div class='row-fluid'>
        <div class='span12'>
            <div class='page-header'>
                <h1 class='pull-left'>
                    <i class='icon-edit'></i>
                    <span>新增奖品</span>
                </h1>

            </div>
        </div>
    </div>


    <div class='row-fluid'>
        <div class='span12 box bordered-box red-border' style='margin-bottom:0;'>
            <div class='box-header red-background'>
                <div class='title'>奖品列表</div>

            </div>
            <div class='box-content box-no-padding'>

                <div class='responsive-table'>

                    <div class='scrollable-area'>
                        <table class='data-table table table-bordered ' style='margin-bottom:0;'>
                            <thead>
                            <tr>
                                <th>
                                    等级
                                </th>
                                <th>
                                    name
                                </th>
                                <th>
                                    中奖概率
                                </th>
                                <th>
                                    奖品数目
                                </th>
                                <th>
                                    奖品类型
                                </th>
                                <th>
                                    操作
                                </th>

                            </tr>
                            </thead>
                            <tbody id ="the-tbody">



                            </tbody>

                        </table>
                        <div  class="btn btn-warning btn-block " data-toggle="modal" href="#modal-append" role="button">NEW</div>

                        &nbsp;
                        &nbsp;
                        <div  class="btn  btn-block  btn-success "  id = "submit_it" role="button">提交</div>

                        <div class="modal fade" id="modal-append" tabindex="-1" aria-hidden="false" style="display: block;">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">×</button>
                                        <h4 class="modal-title" >增加奖品</h4>
                                    </div>
                                    <div class="modal-body">
                                        <form class="form" style="margin-bottom: 0;"  accept-charset="UTF-8">
                                            <input name="authenticity_token" type="hidden">
                                            <div class="form-group">
                                            <label for="inputText2">等级</label>
                                            <input class="form-control append-level" id="inputText2" placeholder="Text field" type="text">
                                        </div>
                                            <div class="form-group">
                                                <label for="inputText9">name</label>
                                                <input class="form-control append-name" id="inputText9" placeholder="Text field" type="text" value="">
                                            </div>
                                            <div class="form-group">
                                                <label for="inputText3">中奖概率</label>
                                                <input class="form-control append-prob" id="inputText3" placeholder="Text field" type="text" value="">
                                            </div>
                                            <div class="form-group">
                                                <label for="inputTextArea1">奖品数目</label>
                                                <textarea class="form-control append-left" id="inputTextArea1" placeholder="Textarea" rows="3"></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="inputTextArea1">奖品类型</label>
                                                <textarea class="form-control append-type" id="inputTextArea12" placeholder="Textarea" rows="3"></textarea>
                                            </div>
                                            <hr class="hr-normal">
                                        </form>

                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                                        <button class="btn btn-primary append-ensure"  data-dismiss="modal"  type="button">Save changes</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>


</section>
</div>

<!-- / jquery mobile events (for touch and slide) -->
<script src='/assets/javascripts/plugins/mobile_events/jquery.mobile-events.min.js' type='text/javascript'></script>
<!-- / jquery migrate (for compatibility with new jquery) -->
<script src='/assets/javascripts/jquery/jquery-migrate.min.js' type='text/javascript'></script>
<!-- / jquery ui -->
<script src='/assets/javascripts/jquery_ui/jquery-ui.min.js' type='text/javascript'></script>
<!-- / bootstrap -->
<script src='/assets/javascripts/bootstrap/bootstrap.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/flot/excanvas.js' type='text/javascript'></script>
<!-- / sparklines -->
<script src='/assets/javascripts/plugins/sparklines/jquery.sparkline.min.js' type='text/javascript'></script>
<!-- / flot charts -->
<script src='/assets/javascripts/plugins/flot/flot.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/flot/flot.resize.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/flot/flot.pie.js' type='text/javascript'></script>
<!-- / bootstrap switch -->
<script src='/assets/javascripts/plugins/bootstrap_switch/bootstrapSwitch.min.js' type='text/javascript'></script>
<!-- / fullcalendar -->
<script src='/assets/javascripts/plugins/fullcalendar/fullcalendar.min.js' type='text/javascript'></script>
<!-- / datatables -->
<script src='/assets/javascripts/plugins/datatables/jquery.dataTables.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/datatables/jquery.dataTables.columnFilter.js' type='text/javascript'></script>
<!-- / wysihtml5 -->
<script src='/assets/javascripts/plugins/common/wysihtml5.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/common/bootstrap-wysihtml5.js' type='text/javascript'></script>
<!-- / select2 -->
<script src='/assets/javascripts/plugins/select2/select2.js' type='text/javascript'></script>
<!-- / color picker -->
<script src='/assets/javascripts/plugins/bootstrap_colorpicker/bootstrap-colorpicker.min.js' type='text/javascript'></script>
<!-- / mention -->
<script src='/assets/javascripts/plugins/mention/mention.min.js' type='text/javascript'></script>
<!-- / input mask -->
<script src='/assets/javascripts/plugins/input_mask/bootstrap-inputmask.min.js' type='text/javascript'></script>
<!-- / fileinput -->
<script src='/assets/javascripts/plugins/fileinput/bootstrap-fileinput.js' type='text/javascript'></script>
<!-- / modernizr -->
<script src='/assets/javascripts/plugins/modernizr/modernizr.min.js' type='text/javascript'></script>
<!-- / retina -->
<script src='/assets/javascripts/plugins/retina/retina.js' type='text/javascript'></script>
<!-- / fileupload -->
<script src='/assets/javascripts/plugins/fileupload/tmpl.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/load-image.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/canvas-to-blob.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/jquery.iframe-transport.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/jquery.fileupload.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/jquery.fileupload-fp.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/jquery.fileupload-ui.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/fileupload/jquery.fileupload-init.js' type='text/javascript'></script>
<!-- / timeago -->
<script src='/assets/javascripts/plugins/timeago/jquery.timeago.js' type='text/javascript'></script>
<!-- / slimscroll -->
<script src='/assets/javascripts/plugins/slimscroll/jquery.slimscroll.min.js' type='text/javascript'></script>
<!-- / autosize (for textareas) -->
<script src='/assets/javascripts/plugins/autosize/jquery.autosize-min.js' type='text/javascript'></script>
<!-- / charCount -->
<script src='/assets/javascripts/plugins/charCount/charCount.js' type='text/javascript'></script>
<!-- / validate -->
<script src='/assets/javascripts/plugins/validate/jquery.validate.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/validate/additional-methods.js' type='text/javascript'></script>
<!-- / naked password -->
<script src='/assets/javascripts/plugins/naked_password/naked_password-0.2.4.min.js' type='text/javascript'></script>
<!-- / nestable -->
<script src='/assets/javascripts/plugins/nestable/jquery.nestable.js' type='text/javascript'></script>
<!-- / tabdrop -->
<script src='/assets/javascripts/plugins/tabdrop/bootstrap-tabdrop.js' type='text/javascript'></script>
<!-- / jgrowl -->
<script src='/assets/javascripts/plugins/jgrowl/jquery.jgrowl.min.js' type='text/javascript'></script>
<!-- / bootbox -->
<script src='/assets/javascripts/plugins/bootbox/bootbox.min.js' type='text/javascript'></script>
<!-- / inplace editing -->
<script src='/assets/javascripts/plugins/xeditable/bootstrap-editable.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/xeditable/wysihtml5.js' type='text/javascript'></script>
<!-- / ckeditor -->
<script src='/assets/javascripts/plugins/ckeditor/ckeditor.js' type='text/javascript'></script>
<!-- / filetrees -->
<script src='/assets/javascripts/plugins/dynatree/jquery.dynatree.min.js' type='text/javascript'></script>
<!-- / datetime picker -->
<script src='/assets/javascripts/plugins/bootstrap_datetimepicker/bootstrap-datetimepicker.js' type='text/javascript'></script>
<!-- / daterange picker -->
<script src='/assets/javascripts/plugins/bootstrap_daterangepicker/moment.min.js' type='text/javascript'></script>
<script src='/assets/javascripts/plugins/bootstrap_daterangepicker/bootstrap-daterangepicker.js' type='text/javascript'></script>
<!-- / max length -->
<script src='/assets/javascripts/plugins/bootstrap_maxlength/bootstrap-maxlength.min.js' type='text/javascript'></script>
<!-- / dropdown hover -->
<script src='/assets/javascripts/plugins/bootstrap_hover_dropdown/twitter-bootstrap-hover-dropdown.min.js' type='text/javascript'></script>
<!-- / slider nav (address book) -->
<script src='/assets/javascripts/plugins/slider_nav/slidernav-min.js' type='text/javascript'></script>
<!-- / fuelux -->
<script src='/assets/javascripts/plugins/fuelux/wizard.js' type='text/javascript'></script>
<!-- / flatty theme -->
<script src='/assets/javascripts/nav.js' type='text/javascript'></script>
<script src='/assets/javascripts/tables.js' type='text/javascript'></script>
<script src='/assets/javascripts/theme.js' type='text/javascript'></script>
<!-- / demo -->
<script src='/assets/javascripts/demo/jquery.mockjax.js' type='text/javascript'></script>
<script src='/assets/javascripts/demo/inplace_editing.js' type='text/javascript'></script>
<script src='/assets/javascripts/demo/charts.js' type='text/javascript'></script>
<script>

  function delete_by_id(id){
      delete arr[id];
     $("#"+id).html("");
  }
  var arr = {};

    $().ready(function(){
        $("tbody").html("");
        $("#submit_it").click(function(){
            var the_arr = [];
            var value;
            for(value in arr){
                the_arr[the_arr.length] = arr[value];
            }
            console.log(the_arr);
            $.post("/web/myadmin/award/new",{arr:the_arr}).done(function(){
                window.location.href = "/web/admin/index.html" ;
            })
        })
        $("#modal-append").find(">.modal-dialog>.modal-content>.modal-footer>.append-ensure").click(function(){
            var obj = {award_level:"text",award_name:"",award_left:"",award_prob:""};
            obj.award_level = $(".append-level").attr("value");
            obj.award_name = $(".append-name").attr("value");
            obj.award_prob = $(".append-prob").attr("value");
            obj.award_left = $(".append-left").attr("value");
            obj.award_type = $(".append-type").attr("value");
            arr[obj.award_level] = obj;

            $(".append-level").attr("value","");
            $(".append-name").attr("value","");
            $(".append-prob").attr("value","");
            $(".append-left").attr("value","") ;
            $(".append-type").attr("value","");

            var str = '<tr id="'+obj.award_level+'">';
            str += "<th>";
            str += obj.award_level;
            str += "</th><th>";
            str += obj.award_name;
            str +="</th><th>";
            str += obj.award_prob;
            str += "</th><th>";
            str +=  obj.award_left;
            str += "</th><th>";
            str +=  obj.award_type;
            str += "</th><th>";
                            str +='<input class="btn btn-danger delete-auto" value="删除" onclick= "delete_by_id('+ obj.award_level +')" type="button"> ';
                        $("#the-tbody").append(str);
                    })
                })

</script>
</body>
</html>
